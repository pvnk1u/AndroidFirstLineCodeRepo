# 最常用和最难用的控件：ListView

ListView在过去绝对可以称得上是Android中最常用的控件之一，几乎所有的应用程序都会用到它。由于手机屏幕空间比较有限，能够一次性在屏幕上显示的内容并不多，当程序中有大量的数据需要展示的时候，就可以借助ListView来实现。ListView允许用户通过手指上下滑动的方式将屏幕外的数据滚动到屏幕内，同时屏幕上原有的数据会滚动出屏幕。



不过比起前面介绍的几种控件，ListView的用法相对复杂了很多。



## ListView的简单用法

修改activity_main.xml中的代码，如下所示：

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!--
    ListView的宽度和高度都设置为match_parent，这样ListView就占满了整个布局的空间
    -->
    <ListView
        android:id="@+id/listView"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout>
```

在布局中加入ListView控件还算非常简单，先为ListView指定一个id，然后将宽度和高度都设置为match_parent，这样ListView就占满了整个布局的空间。



接下来修改MainActivity中的代码，如下所示：

```kotlin
import android.os.Bundle
import android.widget.ArrayAdapter
import android.widget.ListView
import androidx.appcompat.app.AppCompatActivity

class MainActivity : AppCompatActivity() {

    private val data = listOf("Apple","Banana","Orange","Watermelon",
        "Pear","Grape","Pineapple","Strawberry","Cherry","Mango",
        "Apple","Banana","Orange","Watermelon","Pear","Grape",
        "Pineapple","Strawberry","Cherry","Mango"
        )
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        // ListView的适配器
        /**
         * 在ArrayAdapter的构造函数中依次传入Activity的实例、ListView子项布局的id，以及数据源
         * 使用了android.R.layout.simple_list_item_1作为ListView子项布局的id，这是一个
         * Android内置的布局文件，里面只有一个TextView，可用于简单地显示一段文本。
         */
        val adapter = ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,data)
        val listView: ListView = findViewById(R.id.listView)
        /**
         * 最后，调用ListView的setAdapter()方法，将构建好的适配器对象传递进去，这样ListView和数据之间的关联就建立完成了。
         */
        listView.adapter = adapter
    }
}
```

